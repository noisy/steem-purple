#!/bin/sh

CONFIG="config.h"

env echo -e -n "#ifndef MRIM_CONFIG_H\n#define MRIM_CONFIG_H\n\n" > $CONFIG

env echo -e -n "#define BUILD_NUMBER \"" >> $CONFIG
# echo -en `svn info | grep Revision | sed "s/Revision: /r/g"` >> $CONFIG
# env echo -e -n `svn info | grep -m 1 -oE ": [0-9]+$" | sed 's/: /r/g'` >> $CONFIG
env echo -e -n `date +git%Y%m%d` >> $CONFIG
env echo -e -n "\"\n\n" >> $CONFIG

for option in $@; do
	case $option in
		--gtk)
			env echo -e -n "#define ENABLE_GTK\n" >> $CONFIG
			;;
		--help)
			echo "mrim-prpl configure script"
			echo "Usage: ./configure.sh [options]"
			echo "Options:"
			echo "    --help - display this text"
			echo "    --gtk - enable GTK+ interface in plugin"
			;;
	esac
done

env echo -e "\n#endif" >> $CONFIG

